import{g as q}from"./@babel-92ecf054.js";function B(n){var r=null,t=function(){return r==null&&(r=n()),r};return t}function G(n,r){return n.filter(function(t){return t!==r})}function Q(n,r){var t=new Set,e=function(u){return t.add(u)};n.forEach(e),r.forEach(e);var a=[];return t.forEach(function(i){return a.push(i)}),a}function J(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function k(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Z(n,r,t){return r&&k(n.prototype,r),t&&k(n,t),n}var ee=function(){function n(r){J(this,n),this.entered=[],this.isNodeInDocument=r}return Z(n,[{key:"enter",value:function(t){var e=this,a=this.entered.length,i=function(o){return e.isNodeInDocument(o)&&(!o.contains||o.contains(t))};return this.entered=Q(this.entered.filter(i),[t]),a===0&&this.entered.length>0}},{key:"leave",value:function(t){var e=this.entered.length;return this.entered=G(this.entered.filter(this.isNodeInDocument),t),e>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),n}(),z=B(function(){return/firefox/i.test(navigator.userAgent)}),Y=B(function(){return!!window.safari});function te(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function _(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function re(n,r,t){return r&&_(n.prototype,r),t&&_(n,t),n}var A=function(){function n(r,t){te(this,n);for(var e=r.length,a=[],i=0;i<e;i++)a.push(i);a.sort(function(N,V){return r[N]<r[V]?-1:1});for(var u=[],o=[],s,f,c=0;c<e-1;c++)s=r[c+1]-r[c],f=t[c+1]-t[c],u.push(s),o.push(f/s);for(var d=[o[0]],l=0;l<u.length-1;l++){var v=o[l],h=o[l+1];if(v*h<=0)d.push(0);else{s=u[l];var D=u[l+1],T=s+D;d.push(3*T/((T+D)/v+(T+s)/h))}}d.push(o[o.length-1]);for(var y=[],m=[],g,p=0;p<d.length-1;p++){g=o[p];var E=d[p],w=1/u[p],O=E+d[p+1]-g-g;y.push((g-E-O)*w),m.push(O*w*w)}this.xs=r,this.ys=t,this.c1s=d,this.c2s=y,this.c3s=m}return re(n,[{key:"interpolate",value:function(t){var e=this.xs,a=this.ys,i=this.c1s,u=this.c2s,o=this.c3s,s=e.length-1;if(t===e[s])return a[s];for(var f=0,c=o.length-1,d;f<=c;){d=Math.floor(.5*(f+c));var l=e[d];if(l<t)f=d+1;else if(l>t)c=d-1;else return a[d]}s=Math.max(0,c);var v=t-e[s],h=v*v;return a[s]+i[s]*v+u[s]*h+o[s]*v*h}}]),n}(),ne=1;function $(n){var r=n.nodeType===ne?n:n.parentElement;if(!r)return null;var t=r.getBoundingClientRect(),e=t.top,a=t.left;return{x:a,y:e}}function I(n){return{x:n.clientX,y:n.clientY}}function ae(n){var r;return n.nodeName==="IMG"&&(z()||!(!((r=document.documentElement)===null||r===void 0)&&r.contains(n)))}function ie(n,r,t,e){var a=n?r.width:t,i=n?r.height:e;return Y()&&n&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function oe(n,r,t,e,a){var i=ae(r),u=i?n:r,o=$(u),s={x:t.x-o.x,y:t.y-o.y},f=n.offsetWidth,c=n.offsetHeight,d=e.anchorX,l=e.anchorY,v=ie(i,r,f,c),h=v.dragPreviewWidth,D=v.dragPreviewHeight,T=function(){var O=new A([0,.5,1],[s.y,s.y/c*D,s.y+D-c]),N=O.interpolate(l);return Y()&&i&&(N+=(window.devicePixelRatio-1)*D),N},y=function(){var O=new A([0,.5,1],[s.x,s.x/f*h,s.x+h-f]);return O.interpolate(d)},m=a.offsetX,g=a.offsetY,p=m===0||m,E=g===0||g;return{x:p?m:y(),y:E?g:T()}}var W="__NATIVE_FILE__",U="__NATIVE_URL__",K="__NATIVE_TEXT__";const L=Object.freeze(Object.defineProperty({__proto__:null,FILE:W,TEXT:K,URL:U},Symbol.toStringTag,{value:"Module"}));function M(n,r,t){var e=r.reduce(function(a,i){return a||n.getData(i)},"");return e??t}var S;function C(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}var P=(S={},C(S,W,{exposeProperties:{files:function(r){return Array.prototype.slice.call(r.files)},items:function(r){return r.items}},matchesTypes:["Files"]}),C(S,U,{exposeProperties:{urls:function(r,t){return M(r,t,"").split(`
`)}},matchesTypes:["Url","text/uri-list"]}),C(S,K,{exposeProperties:{text:function(r,t){return M(r,t,"")}},matchesTypes:["Text","text/plain"]}),S);function se(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function x(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function ue(n,r,t){return r&&x(n.prototype,r),t&&x(n,t),n}var fe=function(){function n(r){se(this,n),this.config=r,this.item={},this.initializeExposedProperties()}return ue(n,[{key:"initializeExposedProperties",value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(e,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(t){var e=this;if(t){var a={};Object.keys(this.config.exposeProperties).forEach(function(i){a[i]={value:e.config.exposeProperties[i](t,e.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,a)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(t,e){return e===t.getSourceId()}},{key:"endDrag",value:function(){}}]),n}();function de(n,r){var t=new fe(P[n]);return t.loadDataTransfer(r),t}function j(n){if(!n)return null;var r=Array.prototype.slice.call(n.types||[]);return Object.keys(P).filter(function(t){var e=P[t].matchesTypes;return e.some(function(a){return r.indexOf(a)>-1})})[0]||null}function ce(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function R(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function le(n,r,t){return r&&R(n.prototype,r),t&&R(n,t),n}var ve=function(){function n(r){ce(this,n),this.globalContext=r}return le(n,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){if(this.window)return this.window.document}}]),n}();function X(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,e)}return t}function F(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?X(Object(t),!0).forEach(function(e){ge(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function ge(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function he(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function H(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function pe(n,r,t){return r&&H(n.prototype,r),t&&H(n,t),n}var De=function(){function n(r,t){var e=this;he(this,n),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(a){var i=e.sourceNodes.get(a);return i&&$(i)||null},this.endDragNativeItem=function(){e.isDraggingNativeItem()&&(e.actions.endDrag(),e.currentNativeHandle&&e.registry.removeSource(e.currentNativeHandle),e.currentNativeHandle=null,e.currentNativeSource=null)},this.isNodeInDocument=function(a){return!!(a&&e.document&&e.document.body&&document.body.contains(a))},this.endDragIfSourceWasRemovedFromDOM=function(){var a=e.currentDragSourceNode;e.isNodeInDocument(a)||e.clearCurrentDragSourceNode()&&e.actions.endDrag()},this.handleTopDragStartCapture=function(){e.clearCurrentDragSourceNode(),e.dragStartSourceIds=[]},this.handleTopDragStart=function(a){if(!a.defaultPrevented){var i=e.dragStartSourceIds;e.dragStartSourceIds=null;var u=I(a);e.monitor.isDragging()&&e.actions.endDrag(),e.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:e.getSourceClientOffset,clientOffset:u});var o=a.dataTransfer,s=j(o);if(e.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){var f=e.monitor.getSourceId(),c=e.sourceNodes.get(f),d=e.sourcePreviewNodes.get(f)||c;if(d){var l=e.getCurrentSourcePreviewNodeOptions(),v=l.anchorX,h=l.anchorY,D=l.offsetX,T=l.offsetY,y={anchorX:v,anchorY:h},m={offsetX:D,offsetY:T},g=oe(c,d,u,y,m);o.setDragImage(d,g.x,g.y)}}try{o==null||o.setData("application/json",{})}catch{}e.setCurrentDragSourceNode(a.target);var p=e.getCurrentSourcePreviewNodeOptions(),E=p.captureDraggingState;E?e.actions.publishDragSource():setTimeout(function(){return e.actions.publishDragSource()},0)}else if(s)e.beginDragNativeItem(s);else{if(o&&!o.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}}},this.handleTopDragEndCapture=function(){e.clearCurrentDragSourceNode()&&e.actions.endDrag()},this.handleTopDragEnterCapture=function(a){e.dragEnterTargetIds=[];var i=e.enterLeaveCounter.enter(a.target);if(!(!i||e.monitor.isDragging())){var u=a.dataTransfer,o=j(u);o&&e.beginDragNativeItem(o,u)}},this.handleTopDragEnter=function(a){var i=e.dragEnterTargetIds;if(e.dragEnterTargetIds=[],!!e.monitor.isDragging()){e.altKeyPressed=a.altKey,z()||e.actions.hover(i,{clientOffset:I(a)});var u=i.some(function(o){return e.monitor.canDropOnTarget(o)});u&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=e.getCurrentDropEffect()))}},this.handleTopDragOverCapture=function(){e.dragOverTargetIds=[]},this.handleTopDragOver=function(a){var i=e.dragOverTargetIds;if(e.dragOverTargetIds=[],!e.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}e.altKeyPressed=a.altKey,e.actions.hover(i||[],{clientOffset:I(a)});var u=(i||[]).some(function(o){return e.monitor.canDropOnTarget(o)});u?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=e.getCurrentDropEffect())):e.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(a){e.isDraggingNativeItem()&&a.preventDefault();var i=e.enterLeaveCounter.leave(a.target);i&&e.isDraggingNativeItem()&&e.endDragNativeItem()},this.handleTopDropCapture=function(a){if(e.dropTargetIds=[],a.preventDefault(),e.isDraggingNativeItem()){var i;(i=e.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}e.enterLeaveCounter.reset()},this.handleTopDrop=function(a){var i=e.dropTargetIds;e.dropTargetIds=[],e.actions.hover(i,{clientOffset:I(a)}),e.actions.drop({dropEffect:e.getCurrentDropEffect()}),e.isDraggingNativeItem()?e.endDragNativeItem():e.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(a){var i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new ve(t),this.actions=r.getActions(),this.monitor=r.getMonitor(),this.registry=r.getRegistry(),this.enterLeaveCounter=new ee(this.isNodeInDocument)}return pe(n,[{key:"profile",value:function(){var t,e;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}},{key:"setup",value:function(){if(this.window!==void 0){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){this.window!==void 0&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(t,e,a){var i=this;return this.sourcePreviewNodeOptions.set(t,a),this.sourcePreviewNodes.set(t,e),function(){i.sourcePreviewNodes.delete(t),i.sourcePreviewNodeOptions.delete(t)}}},{key:"connectDragSource",value:function(t,e,a){var i=this;this.sourceNodes.set(t,e),this.sourceNodeOptions.set(t,a);var u=function(f){return i.handleDragStart(f,t)},o=function(f){return i.handleSelectStart(f)};return e.setAttribute("draggable","true"),e.addEventListener("dragstart",u),e.addEventListener("selectstart",o),function(){i.sourceNodes.delete(t),i.sourceNodeOptions.delete(t),e.removeEventListener("dragstart",u),e.removeEventListener("selectstart",o),e.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(t,e){var a=this,i=function(f){return a.handleDragEnter(f,t)},u=function(f){return a.handleDragOver(f,t)},o=function(f){return a.handleDrop(f,t)};return e.addEventListener("dragenter",i),e.addEventListener("dragover",u),e.addEventListener("drop",o),function(){e.removeEventListener("dragenter",i),e.removeEventListener("dragover",u),e.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var t=this.monitor.getSourceId(),e=this.sourceNodeOptions.get(t);return F({dropEffect:this.altKeyPressed?"copy":"move"},e||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var t=this.monitor.getSourceId(),e=this.sourcePreviewNodeOptions.get(t);return F({anchorX:.5,anchorY:.5,captureDraggingState:!1},e||{})}},{key:"isDraggingNativeItem",value:function(){var t=this.monitor.getItemType();return Object.keys(L).some(function(e){return L[e]===t})}},{key:"beginDragNativeItem",value:function(t,e){this.clearCurrentDragSourceNode(),this.currentNativeSource=de(t,e),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(t){var e=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;var a=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){return e.window&&e.window.addEventListener("mousemove",e.endDragIfSourceWasRemovedFromDOM,!0)},a)}},{key:"clearCurrentDragSourceNode",value:function(){return this.currentDragSourceNode?(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0):!1}},{key:"handleDragStart",value:function(t,e){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(e))}},{key:"handleDragEnter",value:function(t,e){this.dragEnterTargetIds.unshift(e)}},{key:"handleDragOver",value:function(t,e){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(e)}},{key:"handleDrop",value:function(t,e){this.dropTargetIds.unshift(e)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}]),n}(),b;function me(){return b||(b=new Image,b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),b}var Te=function(r,t){return new De(r,t)};const ye=Object.freeze(Object.defineProperty({__proto__:null,HTML5Backend:Te,NativeTypes:L,getEmptyImage:me},Symbol.toStringTag,{value:"Module"})),we=q(ye);export{we as r};
